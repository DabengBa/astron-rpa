id,issue_title,task_content,acceptance_criteria,project_progress,file_path,prd_link,tech_link,commit_message
T001,拆分运行配置维度（RunProfile + TerminalMode）,背景：现有系统已存在“调度模式/终端模式”概念，离线能力属于网络维度，两者耦合会导致 AppMode 冲突与后续扩展困难。<br>目标：定义并落地 RunProfile（offline/online）与 TerminalMode（normal/scheduling）两个独立配置维度，明确默认值为 OFFLINE + NORMAL，并固定配置读取优先级。<br>价值：满足 OCP/DIP，后续门禁、路径、编排可按维度扩展，减少侵入式修改。,1. 文档明确 RunProfile/TerminalMode 的枚举与默认值（OFFLINE + NORMAL）<br>2. 明确配置读取优先级与落盘位置（在解压目录内）<br>3. TECHNICAL_APPROACH 中架构章节可追溯到该决策,已完成,,docs/specs/26011501-offline-standalone-local-run/prd.md#5-功能需求,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#2-总体架构,docs: 定义 RunProfile/TerminalMode 配置维度 fixes #T001
T002,实现 PathPolicy 并统一落盘到解压目录,背景：当前 packaged 场景默认使用 Electron userDataPath（%APPDATA%）不符合“绿色便携”。<br>目标：引入 PathPolicy 抽象并在主进程统一使用，确保 data/runtime/exports/logs 全部落在解压目录相对路径。<br>价值：满足 portable-first；删除目录即卸载；降低权限风险。,1. packaged 场景下 appWorkPath 不再指向 userDataPath<br>2. 所有写入路径通过 PathPolicy 计算（无硬编码散落）<br>3. 解压目录可移动，重新启动仍可运行,已完成,frontend/packages/electron-app/src/main/path.ts; frontend/packages/electron-app/src/main/server.ts,docs/specs/26011501-offline-standalone-local-run/prd.md#5-功能需求,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,feat: portable-first 路径策略 fixes #T002
T003,引入 FeatureGate/NetworkPolicy 并关闭默认出网,背景：现有 Web 端启动时会自动 checkUpdate，Electron 侧存在 electron-updater 调用，违背“默认不出网”。<br>目标：新增 FeatureGate/NetworkPolicy 抽象，OFFLINE profile 下禁止任何自动出网；在线功能统一置灰提示。<br>价值：通过集中门禁保证维护性，避免散落 if；通过策略注入提升可测试性。,1. 启动链路不触发更新检查（例如 App.vue onMounted 不再自动调用）<br>2. electron-updater 在 OFFLINE profile 下不执行 checkForUpdates<br>3. 在线入口统一置灰并展示一致 reason,已完成,frontend/packages/web-app/src/views/Home/App.vue; frontend/packages/electron-app/src/main/updater.ts,docs/specs/26011501-offline-standalone-local-run/prd.md#5-功能需求,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,feat: 离线门禁与网络策略 fixes #T003
T004,固定入口端口复用 route_port=13159 并建立健康检查闭环,背景：系统内已存在 route_port/gateway_port（默认 13159）作为网关/路由端口，PRD 要求“第一个固定接口”。<br>目标：将固定入口端口定义为 route_port=13159（唯一入口），在该端口提供 /health（可选 /capabilities），Electron 主进程探活并驱动 UI ready 状态。<br>价值：避免双入口配置，降低排障成本，为能力矩阵提供数据源。,1. 入口端口固定为 13159（route_port）且有单一配置来源<br>2. Python 侧提供 /health 并返回可判断的状态码/内容<br>3. 端口占用时给出明确错误提示并不中途卡死,已完成,,docs/specs/26011501-offline-standalone-local-run/prd.md#5-功能需求,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,feat: 复用 13159 固定入口与健康检查 fixes #T004
T005,移除登录流程与鉴权依赖,背景：需求明确“无登录、无授权”，且 UI 已存在 offlineLogin/license 文案线索，需要清理以避免误导与依赖链路。<br>目标：移除登录页/入口/跳转；鉴权拦截（401 跳转等）在 OFFLINE 下改为本地可用或置灰提示。<br>价值：真正做到解压即用，减少企业审批阻力。,1. 启动后不出现任何登录/授权页面与入口<br>2. 不要求 license 文件/激活/账号体系即可进入主功能<br>3. 若某功能原依赖鉴权，OFFLINE 下必须明确置灰并说明,???,frontend/locales/zh-CN.json; frontend/locales/en-US.json; frontend/packages/web-app/src/router/**,docs/specs/26011501-offline-standalone-local-run/prd.md#6-交互与体验要求,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,feat: 移除登录授权流程 fixes #T005
T006,离线不可用能力的统一置灰与提示文案规范,背景：PRD 指定“目前阶段先置灰标注不可用”，需要统一机制避免各处各写各的提示。<br>目标：定义 Capability 列表与 reason 文案模板，并在 UI 入口层统一渲染（按钮/菜单/页面）。<br>价值：一致体验、易维护；后续上线 ONLINE profile 时仅需扩展 gate/capabilities。,1. 能力矩阵（UPDATE/MARKET/CLOUD_AI 等）在代码中有单一信息源<br>2. 置灰 UI 统一展示 reason，不同入口一致<br>3. 不影响核心离线流程运行,???,,docs/specs/26011501-offline-standalone-local-run/prd.md#6-交互与体验要求,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,feat: 统一离线置灰能力矩阵 fixes #T006
T007,便携模式诊断包导出（本地）方案,背景：离线环境无法在线上报，问题排查依赖本地导出。<br>目标：实现“一键导出诊断包”，包含版本信息、配置、关键日志、端口状态等，输出到 ./exports/diagnostics。<br>价值：提升可运维性与问题定位效率，减少反复沟通。,1. 在解压目录生成 exports/diagnostics 输出<br>2. 诊断包包含：版本信息、配置、关键日志、进程状态/端口状态（可选）<br>3. 导出失败有明确错误提示,???,,docs/specs/26011501-offline-standalone-local-run/prd.md#7-输出与数据,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,feat: 离线诊断包导出 fixes #T007
T008,离线便携 zip 打包与构建流水线固化,背景：离线交付的核心是“可复现构建 + 依赖内置”，需要把构建步骤固化到脚本/文档。<br>目标：定义并固化构建流程：前端打包（Electron）+ 资源目录准备 + Python .7z 依赖/哈希生成 + 最终 zip 组装。<br>价值：避免人工打包出错，支持持续集成与版本可追溯。,1. 有一键构建脚本或 Make/Batch 步骤说明<br>2. 构建产物 zip 可在断网机器上运行<br>3. 产物结构符合 PRD 目录约定,???,build.bat; makefiles/**,docs/specs/26011501-offline-standalone-local-run/prd.md#7-输出与数据,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,build: 固化离线便携打包流水线 fixes #T008
T009,全局 loopback-only 收敛（BindPolicy + 服务监听统一）,背景：当前部分服务默认监听 0.0.0.0（例如 browser-bridge），违反“全局 loopback-only”非功能性需求。<br>目标：定义 BindPolicy（host=127.0.0.1）并确保所有本地服务读取同一配置源，统一只监听 127.0.0.1。<br>价值：满足安全与“无需防火墙权限”前提，减少暴露面与审计风险。,1. 全部本地服务默认 host=127.0.0.1（禁止 0.0.0.0）<br>2. 关键服务（scheduler/browser-bridge/trigger/picker 等）均验证仅 loopback 可访问<br>3. 文档与配置源明确且可追溯,未开始,engine/servers/**; resources/conf.yaml,docs/specs/26011501-offline-standalone-local-run/prd.md#5-功能需求,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,feat: 全局 loopback-only 收敛 fixes #T009
T010,Electron Windows 打包确保无需管理员权限并支持 zip 便携分发,背景：若 Windows 打包配置要求管理员权限（UAC），将直接违反 PRD；同时需要稳定产出 zip 便携包。<br>目标：审计并修正 Electron 打包/manifest 配置，确保 requestedExecutionLevel 为 asInvoker（或等效），并固化 zip/portable 产物输出。<br>价值：保证“无需管理员权限 + zip 免安装”的交付底座。,1. Windows 打包产物启动不触发 UAC 提权弹窗<br>2. 产物可直接解压运行（zip 便携）<br>3. 构建流水线可复现并在文档中说明,未开始,frontend/packages/electron-app/**; frontend/packages/electron-app/electron-builder.json,docs/specs/26011501-offline-standalone-local-run/prd.md#2-范围与交付,docs/specs/26011501-offline-standalone-local-run/TECHNICAL_APPROACH.md#3-端到端实现路径,build: Electron 便携包无需管理员 fixes #T010
